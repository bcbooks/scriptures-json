{"version":3,"file":"view_compiler.js","sourceRoot":"","sources":["../../../../../modules/@angular/compiler/src/view_compiler/view_compiler.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG;OAEI,EAAC,UAAU,EAAC,MAAM,eAAe;OAEjC,EAAC,iBAAiB,EAAC,MAAM,iCAAiC;OAE1D,EAAC,cAAc,EAAC,MAAM,WAAW;OAIjC,EAAC,cAAc,EAAC,MAAM,mBAAmB;OACzC,EAAC,WAAW,EAAC,MAAM,gBAAgB;OACnC,EAAC,QAAQ,EAAC,MAAM,eAAe;OAC/B,EAAoD,SAAS,EAAE,UAAU,EAAC,MAAM,gBAAgB;AAEvG,SAAQ,0BAA0B,EAAE,qBAAqB,QAAO,gBAAgB,CAAC;AAEjF;IACE,2BACW,UAAyB,EAAS,cAAsB,EACxD,YAAqE;QADrE,eAAU,GAAV,UAAU,CAAe;QAAS,mBAAc,GAAd,cAAc,CAAQ;QACxD,iBAAY,GAAZ,YAAY,CAAyD;IAAG,CAAC;IACtF,wBAAC;AAAD,CAAC,AAJD,IAIC;AAGD;IAEE,sBAAoB,UAA0B;QAA1B,eAAU,GAAV,UAAU,CAAgB;QADtC,uBAAkB,GAAG,IAAI,iBAAiB,EAAE,CAAC;IACJ,CAAC;IAElD,uCAAgB,GAAhB,UACI,SAAmC,EAAE,QAAuB,EAAE,MAAoB,EAClF,KAA4B;QAC9B,IAAI,YAAY,GAA4D,EAAE,CAAC;QAC/E,IAAI,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;QACvF,IAAI,UAAU,GAAkB,EAAE,CAAC;QACnC,IAAI,iBAAiB,GAAG,kBAAkB,CAAC,QAAQ,CAAC;QACpD,iBAAiB,CAAC,OAAO,CAAC,UAAA,KAAK;YAC7B,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC;YAC1C,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QACH,IAAI,IAAI,GAAG,IAAI,WAAW,CACtB,SAAS,EAAE,IAAI,CAAC,UAAU,EAAE,KAAK,EAAE,MAAM,EAAE,iBAAiB,EAAE,CAAC,EAC/D,cAAc,CAAC,UAAU,EAAE,EAAE,EAAE,CAAC,CAAC;QACrC,SAAS,CAAC,IAAI,EAAE,QAAQ,EAAE,YAAY,CAAC,CAAC;QACxC,gEAAgE;QAChE,iDAAiD;QACjD,QAAQ,CAAC,IAAI,EAAE,QAAQ,EAAE,kBAAkB,CAAC,OAAO,CAAC,CAAC;QACrD,UAAU,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;QAE7B,MAAM,CAAC,IAAI,iBAAiB,CAAC,UAAU,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;IAChF,CAAC;IACI,uBAAU,GAA0B;QAC3C,EAAE,IAAI,EAAE,UAAU,EAAE;KACnB,CAAC;IACF,kBAAkB;IACX,2BAAc,GAA6D;QAClF,EAAC,IAAI,EAAE,cAAc,GAAG;KACvB,CAAC;IACF,mBAAC;AAAD,CAAC,AAjCD,IAiCC","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Injectable} from '@angular/core';\n\nimport {AnimationCompiler} from '../animation/animation_compiler';\nimport {CompileDirectiveMetadata, CompilePipeMetadata} from '../compile_metadata';\nimport {CompilerConfig} from '../config';\nimport * as o from '../output/output_ast';\nimport {TemplateAst} from '../template_parser/template_ast';\n\nimport {CompileElement} from './compile_element';\nimport {CompileView} from './compile_view';\nimport {bindView} from './view_binder';\nimport {ComponentFactoryDependency, ViewFactoryDependency, buildView, finishView} from './view_builder';\n\nexport {ComponentFactoryDependency, ViewFactoryDependency} from './view_builder';\n\nexport class ViewCompileResult {\n  constructor(\n      public statements: o.Statement[], public viewFactoryVar: string,\n      public dependencies: Array<ViewFactoryDependency|ComponentFactoryDependency>) {}\n}\n\n\nexport class ViewCompiler {\n  private _animationCompiler = new AnimationCompiler();\n  constructor(private _genConfig: CompilerConfig) {}\n\n  compileComponent(\n      component: CompileDirectiveMetadata, template: TemplateAst[], styles: o.Expression,\n      pipes: CompilePipeMetadata[]): ViewCompileResult {\n    var dependencies: Array<ViewFactoryDependency|ComponentFactoryDependency> = [];\n    var compiledAnimations = this._animationCompiler.compileComponent(component, template);\n    var statements: o.Statement[] = [];\n    var animationTriggers = compiledAnimations.triggers;\n    animationTriggers.forEach(entry => {\n      statements.push(entry.statesMapStatement);\n      statements.push(entry.fnStatement);\n    });\n    var view = new CompileView(\n        component, this._genConfig, pipes, styles, animationTriggers, 0,\n        CompileElement.createNull(), []);\n    buildView(view, template, dependencies);\n    // Need to separate binding from creation to be able to refer to\n    // variables that have been declared after usage.\n    bindView(view, template, compiledAnimations.outputs);\n    finishView(view, statements);\n\n    return new ViewCompileResult(statements, view.viewFactory.name, dependencies);\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: ({type: any, decorators?: DecoratorInvocation[]}|null)[] = [\n{type: CompilerConfig, },\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}